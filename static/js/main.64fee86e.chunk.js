(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c=n(12),o=(n(21),n(22),n(23),n(7)),r=n(9),a=n(2),s=n(5),u=n(3),i=n(1),l=n.n(i);function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:n};return c&&(o.body=JSON.stringify(c),o.headers={"Content-Type":"application/json; charset=UTF-8"}),(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate.academy/students-api"+e,o)})).then((function(e){if(!e.ok){var t;switch(n){case"POST":t="Unable to add a todo";break;case"PATCH":t="Unable to update a todo";break;case"DELETE":t="Unable to delete a todo";break;default:t="Unexpected Error"}throw new Error(t)}return e.json()}))}var p=function(e){return d(e)},f=function(e,t){return d(e,"POST",t)},b=function(e,t){return d(e,"PATCH",t)},j=function(e){return d(e,"DELETE")},m=function(e){return p("/todos".concat(e))},O=function(e,t){return f("/todos".concat(e),t)},h=function(e,t){return b("/todos".concat(e),t)},v=n(0),T=l.a.memo((function(e){var t=e.error,n=e.removeError;return Object(i.useEffect)((function(){setTimeout(n,3e3)}),[]),Object(v.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(v.jsx)("button",{type:"button",className:"delete",onClick:n,"aria-label":"An error message"}),t]})})),x=n(4),k=n.n(x),g=function(e){return e[e.ALL=0]="ALL",e[e.COMPLETED=1]="COMPLETED",e[e.ACTIVE=2]="ACTIVE",e}({}),C=l.a.memo((function(e){var t=e.onFilterChange,n=e.filter,c=e.countOfActiveTodos,o=e.completedTodoLength,r=e.removeAllCompletedTodos;return Object(v.jsxs)("footer",{className:"todoapp__footer",children:[Object(v.jsx)("span",{className:"todo-count",children:"".concat(c," items left")}),Object(v.jsxs)("nav",{className:"filter",children:[Object(v.jsx)("a",{href:"#/",className:k()("filter__link",{selected:n===g.ALL}),onClick:function(){t(g.ALL)},children:"All"}),Object(v.jsx)("a",{href:"#/active",className:k()("filter__link",{selected:n===g.ACTIVE}),onClick:function(){t(g.ACTIVE)},children:"Active"}),Object(v.jsx)("a",{href:"#/completed",className:k()("filter__link",{selected:n===g.COMPLETED}),onClick:function(){t(g.COMPLETED)},children:"Completed"})]}),Object(v.jsx)("button",{type:"button",className:k()("todoapp__clear-completed",{"todoapp__clear-completed--novisible":!o}),onClick:r,disabled:!o,children:"Clear completed"})]})})),E=l.a.memo((function(e){var t=e.addNewTodo,n=e.updateAllTodosStatus,c=e.isAllTodosCompleted,o=Object(i.useState)(""),r=Object(u.a)(o,2),a=r[0],s=r[1],l=Object(i.useState)(!1),d=Object(u.a)(l,2),p=d[0],f=d[1],b=Object(i.useState)(!1),j=Object(u.a)(b,2),m=j[0],O=j[1];Object(i.useEffect)((function(){O(c)}),[c]);return Object(v.jsxs)("header",{className:"todoapp__header",children:[Object(v.jsx)("button",{type:"button",className:k()("todoapp__toggle-all",{active:m}),"aria-label":"Toogle all",onClick:function(){O((function(e){return!e})),n(!m)}}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),a?(t(a.trim()),s(""),f(!1)):f(!0)},children:Object(v.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:a,onChange:function(e){s(e.target.value),f(!1)}})}),p&&Object(v.jsx)("p",{className:"todoapp__notification-empty",children:"Title can't be empty"})]})})),_=l.a.memo((function(e){var t=e.isTodoUpdated;return Object(v.jsxs)("div",{className:k()("modal overlay",{"is-active":t}),children:[Object(v.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(v.jsx)("div",{className:"loader"})]})})),N=l.a.memo((function(e){var t=e.todo,n=e.removeTodo,c=e.tempTodoId,o=e.updateTodoStatus,r=e.updateTodoTitle,a=e.isLoading,s=Object(i.useState)(!1),l=Object(u.a)(s,2),d=l[0],p=l[1],f=Object(i.useState)(t.title),b=Object(u.a)(f,2),j=b[0],m=b[1],O=Object(i.useState)(j),h=Object(u.a)(O,2),T=h[0],x=h[1],g=t.title,C=t.id,E=t.completed;Object(i.useEffect)((function(){x(T)}),[t]);var N=function(){j?(j!==T&&r(j,t),p(!1)):n(t)};return Object(v.jsxs)("div",{className:k()("todo",{completed:E}),onDoubleClick:function(){return p(!0)},children:[Object(v.jsx)("label",{className:"todo__status-label",children:Object(v.jsx)("input",{type:"checkbox",className:"todo__status",checked:E,onChange:function(){o(!t.completed,t)}})}),d?Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),N()},children:Object(v.jsx)("input",{type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",value:j,onChange:function(e){return m(e.target.value)},onKeyUp:function(e){"Escape"===e.key&&(p(!1),m(T))},onBlur:function(){N()},autoFocus:!0})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{className:"todo__title",children:g}),Object(v.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return n(t)},children:"x"})]}),a&&Object(v.jsx)(_,{isTodoUpdated:C===c})]})})),w=l.a.memo((function(e){var t=e.todos,n=e.tempTodo,c=e.removeTodo,o=e.completedTodos,r=e.updateTodoStatus,a=e.updateTodoTitle,s=e.loadingTodoIds;return Object(v.jsxs)("section",{className:"todoapp__main",children:[t.map((function(e){return Object(v.jsx)(N,{todo:e,removeTodo:c,updateTodoStatus:r,updateTodoTitle:a,tempTodoId:o.includes(e)||(null===n||void 0===n?void 0:n.id)===e.id?e.id:null,isLoading:s.includes(e.id)},e.id)})),0===(null===n||void 0===n?void 0:n.id)&&Object(v.jsx)(N,{todo:n,removeTodo:c,tempTodoId:n.id,updateTodoStatus:r,updateTodoTitle:a,isLoading:!0})]})})),y=6397,A=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(i.useState)(""),d=Object(u.a)(l,2),p=d[0],f=d[1],b=Object(i.useState)(g.ALL),x=Object(u.a)(b,2),k=x[0],_=x[1],N=Object(i.useState)(null),A=Object(u.a)(N,2),L=A[0],S=A[1],I=Object(i.useState)([]),P=Object(u.a)(I,2),D=P[0],M=P[1],U=n.filter((function(e){switch(k){case g.ACTIVE:return!e.completed;case g.COMPLETED:return e.completed;case g.ALL:default:return!0}})),F=Object(i.useMemo)((function(){return n.filter((function(e){return e.completed}))}),[n]),V=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),e.next=4,m(t);case 4:n=e.sent,c(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0 instanceof Error&&f(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),J=Object(i.useCallback)(function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){var n,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(""),n={title:t,userId:y,completed:!1},e.prev=2,S(Object(r.a)(Object(r.a)({},n),{},{id:0})),M((function(e){return[].concat(Object(o.a)(e),[0])})),e.next=7,O("?userId=".concat(y),n);case 7:s=e.sent,c((function(e){return[].concat(Object(o.a)(e),[s])})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0 instanceof Error&&f(e.t0.message);case 14:return e.prev=14,S(null),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[]),B=Object(i.useCallback)(function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),S(t),M((function(e){return[].concat(Object(o.a)(e),[t.id])})),e.next=6,n="/".concat(t.id,"?userId=").concat(y),j("/todos".concat(n));case 6:c((function(e){return e.filter((function(e){return e.id!==t.id}))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0 instanceof Error&&f(e.t0.message);case 12:return e.prev=12,S(null),M((function(e){return e.filter((function(e){return e!==t.id}))})),e.finish(12);case 16:case"end":return e.stop()}var n}),e,null,[[0,9,12,16]])})));return function(t){return e.apply(this,arguments)}}(),[]),H=Object(i.useCallback)(Object(s.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.filter((function(e){return e.completed})),e.next=3,Promise.all(t.map((function(e){return B(e)})));case 3:case"end":return e.stop()}}),e)}))),[n]),G=Object(i.useCallback)(function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),S(n),M((function(e){return[].concat(Object(o.a)(e),[n.id])})),e.next=6,h("/".concat(n.id,"?userId=").concat(y),{completed:t});case 6:return e.next=8,V("?userId=".concat(y));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Error&&f(e.t0.message);case 13:return e.prev=13,S(null),M((function(e){return e.filter((function(e){return e!==n.id}))})),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,10,13,17]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),K=Object(i.useCallback)((function(e){n.filter((function(t){return t.completed!==e})).forEach(function(){var t=Object(s.a)(Object(a.a)().mark((function t(n){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[n]),R=Object(i.useCallback)(function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),S(n),M((function(e){return[].concat(Object(o.a)(e),[n.id])})),e.next=6,h("/".concat(n.id,"?userId=").concat(y),{title:t});case 6:c((function(e){return e.map((function(e){return e.id===n.id?Object(r.a)(Object(r.a)({},e),{},{title:t}):e}))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0 instanceof Error&&f(e.t0.message);case 12:return e.prev=12,S(null),M((function(e){return e.filter((function(e){return e!==n.id}))})),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,9,12,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);Object(i.useEffect)((function(){V("?userId=".concat(y))}),[]);var W=Object(i.useCallback)((function(){f("")}),[]),q=Object(i.useMemo)((function(){return n.filter((function(e){return!e.completed})).length}),[n]),z=Object(i.useMemo)((function(){return n.length===F.length&&!!n.length}),[n,F.length]);return Object(v.jsxs)("div",{className:"todoapp",children:[Object(v.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(v.jsxs)("div",{className:"todoapp__content",children:[Object(v.jsx)(E,{addNewTodo:J,updateAllTodosStatus:K,isAllTodosCompleted:z}),0!==n.length&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(w,{todos:U,removeTodo:B,tempTodo:L,loadingTodoIds:D,completedTodos:F,updateTodoStatus:G,updateTodoTitle:R}),Object(v.jsx)(C,{onFilterChange:_,filter:k,countOfActiveTodos:q,completedTodoLength:F.length,removeAllCompletedTodos:H})]})]}),p&&Object(v.jsx)(T,{error:p,removeError:W})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(v.jsx)(A,{}))}},[[25,1,2]]]);
//# sourceMappingURL=main.64fee86e.chunk.js.map